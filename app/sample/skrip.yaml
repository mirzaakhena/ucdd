packagePath: bitbucket.org/kfc/loyaltyengine2

restapi: true
messagebroker: false

usecases:

#----------------------------
- name: RegistrationInitialPoint
  ignore: false
  inport: 
    requestFields: [UserID]
    responseFields: [UserPointID]

  outports:
  - name: IsAlreadyHasUserPoint
    requestFields: [UserID]    
    responseFields: [YesItHas]

  - name: GetInitialPoint
    requestFields:
    responseFields: [Point]

  - name: CreateUserPoint
    requestFields: [UserID, Point, PointBalance, EventState, Description]
    responseFields: [UserPointID]

  - name: CreateUserPointExpiry
    requestFields: [UserID, NewPoint, ExpiryDate]
    responseFields: [UserPointExpiryID]

#----------------------------    
- name: OrderCompletePoint
  ignore: true
  inport:
    requestFields: [UserID, OrderAmount, OrderID]
    responseFields: [UserPointID]

  outports:
  - name: GetPointByOrderAmount
    requestFields: [OrderAmount]
    responseFields: [Point]
    
  - name: GetLastUserPoint
    requestFields: [UserID]
    responseFields: [UserPoint]

  - name: CreateUserPoint
    requestFields: [UserID, Point, PointBalance, EventState, Description]
    responseFields: [UserPointID]    


#----------------------------    
- name: BuyVoucherWithPoint
  ignore: true
  inport:
    requestFields: [UserID, VoucherID]
    responseFields: [UserPointID]

  outports:
  - name: GetLastUserPoint
    requestFields: [UserID]
    responseFields: [UserPoint]

  - name: GetPointRequired
    requestFields: [VoucherID]
    responseFields: [Point]
  
  - name: BuyVoucher
    requestFields: [VoucherID]
    responseFields: [VoucherOrderID]

  - name: CreateUserPoint
    requestFields: [UserPointObject]
    responseFields: [UserPointID]

#----------------------------    
- name: ExpiringUserPoint
  ignore: true
  inport:
    requestFields: [UserID]
    responseFields: [UserPointID]

  outports:
  - name: GetLastUserPointExpired
    requestFields: [UserID]
    responseFields: [ExpireUserPoint]
  
  - name: CreateUserPointExpired
    requestFields: [ExpireUserPointObject]
    responseFields: [UserPointExpiredID]

  - name: CreateUserPoint
    requestFields: [UserPointObject]
    responseFields: [UserPointID]
  
    